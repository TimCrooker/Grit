"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[204],{7612:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return p},toc:function(){return u},default:function(){return d}});var r=n(7462),a=n(3366),o=(n(7294),n(3905)),i=["components"],s={sidebar_position:3},l="Create Generator",p={unversionedId:"create-generator",id:"create-generator",isDocsHomePage:!1,title:"Create Generator",description:"Grit provides a generator to make it super easy to build your own generator.",source:"@site/docs/create-generator.md",sourceDirName:".",slug:"/create-generator",permalink:"/Grit/docs/create-generator",editUrl:"https://github.com/TimCrooker/Grit/edit/master/docs/docs/create-generator.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Getting Started",permalink:"/Grit/docs/getting-started"},next:{title:"Generator Instance",permalink:"/Grit/docs/generator-instance"}},u=[{value:"Generator Structure",id:"generator-structure",children:[],level:2},{value:"Understanding the Generator File",id:"understanding-the-generator-file",children:[{value:"Example",id:"example",children:[{value:"prompts",id:"prompts",children:[],level:4}],level:3}],level:2}],c={toc:u};function d(e){var t=e.components,n=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"create-generator"},"Create Generator"),(0,o.kt)("p",null,"Grit provides a generator to make it super easy to build your own generator. "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"grit generator grit-example\n# replace `grit-example` with your desired generator name (must start with `grit-`)\n")),(0,o.kt)("h2",{id:"generator-structure"},"Generator Structure"),(0,o.kt)("p",null,"This is the file structure of your new generator"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\ud83d\udce6grit-example\n\u2523 \ud83d\udcc2template\n \u2503 \u2523 \ud83d\udcdcgitignore\n \u2503 \u2523 \ud83d\udcdcLICENSE\n \u2503 \u2517 \ud83d\udcdcREADME.md\n \u2523 \ud83d\udcc2test\n \u2503 \u2523 \ud83d\udcc2__snapshots__\n \u2503 \u2503 \u2517 \ud83d\udcdctest.ts.snap\n \u2503 \u2517 \ud83d\udcdctest.ts\n \u2523 \ud83d\udcdc.gitignore\n \u2523 \ud83d\udcdcbabel.config.js\n \u2523 \ud83d\udcdcgenerator.ts\n \u2523 \ud83d\udcdcjest.config.js\n \u2523 \ud83d\udcdcLICENSE\n \u2523 \ud83d\udcdcpackage.json\n \u2523 \ud83d\udcdcREADME.md\n \u2523 \ud83d\udcdctsconfig.json\n \u2517 \ud83d\udcdcyarn.lock\n")),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"template")," directory houses the files that grit will scaffold out when you run it."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Transpile the typescript ",(0,o.kt)("inlineCode",{parentName:"p"},"generator.ts")," file into ",(0,o.kt)("inlineCode",{parentName:"p"},"generator.js"))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm run build\n# compiles the `generator.ts` file into generator.js\nyarn build\n# To run script with yarn use this instead\n")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Run the generator")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"grit ./ ../grit-example-output\n")),(0,o.kt)("p",null,"Here you see the file structure of the output matches the contents of the template directory since we are not performing any other actions"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"}," \u2523 \ud83d\udcdc.gitignore\n \u2523 \ud83d\udcdcLICENSE\n \u2517 \ud83d\udcdcREADME.md\n")),(0,o.kt)("h2",{id:"understanding-the-generator-file"},"Understanding the Generator File"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"generator.ts")," file is the most important part of a generator and controls all file and data manipulations. Removing this file will cause Grit to use a default generator.ts that simply copies the contents of the template directory into the output directory. While there will always be those who are scared of typescript, or prefer not to use it, typescript is vital for the generator file as it allows IDE type checking to ensure you impliment features and methods correctly. It will save hours of referencing the docs and allow you to be confident that Grit is working properly. For the most part you don't need to care about typescript anyways since all transpilation is handled for you and you dont need to explicitly type things if you dont want to."),(0,o.kt)("h3",{id:"example"},"Example"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"This is the generator.ts file that we created above with grit-generator")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"import path from \"path\"\nimport { GeneratorConfig } from \"grit-cli\"\n\nexport = {\n  prompts() {\n    return [\n      {\n        name: 'name',\n        type: 'input',\n        message: 'What is the name of the new project',\n        default: `${path.basename(this.outDir)}`,\n        filter: val => val.toLowerCase(),\n      },\n      {\n        name: 'description',\n        type: 'input',\n        message: 'How would you describe the new template',\n        default: `my awesome NEW generator`\n      },\n      {\n        name: 'username',\n        type: 'input',\n        message: 'What is your GitHub username',\n        default: this.gitUser.username || this.gitUser.name,\n        filter: val => val.toLowerCase(),\n        store: true\n      },\n      {\n        name: 'email',\n        type: 'input',\n        message: 'What is your email?',\n        default: this.gitUser.email,\n        store: true\n      },\n      {\n        name: 'website',\n        type: 'input',\n        message: 'The URL of your website',\n        default(data) {\n          return `github.com/${data.answers.username}`\n        },\n        store: true\n      }\n    ]\n  },\n  actions: [\n    {\n      type: 'add',\n      files: '**'\n    },\n    {\n      type: 'move',\n      patterns: {\n        gitignore: '.gitignore',\n       '_package.json': 'package.json'\n      }\n    }\n  ],\n  async completed() {\n    this.gitInit()\n    await this.npmInstall()\n    this.showProjectTips()\n  }\n} as GeneratorConfig\n")),(0,o.kt)("p",null,"This example demonstrates a few key concepts that are required for creating generators. You see the main export has a three main items "),(0,o.kt)("h4",{id:"prompts"},"prompts"),(0,o.kt)("p",null,"The prompts function you see above returns an array of 5 prompt objects."))}d.isMDXComponent=!0}}]);